% b = zeros(720,960,3,9);
% for i = 1:1
%     a = wtXYZ2rgb(wtTonemap(xyzSD(:,:,:)),ccmatrix);
%     wtColorCheck(a);
%     b(:,:,:,i) = a;
%     %figure;
%     %imshow(a);
% end
% figure;
% montage(b, 'size', [1 1]);

load('mat/monitorColorMax.mat');
figure;
plot(monitorColorMax(:,1,1)-upvplWhitePoints(:,1),'r');
hold on;
plot(abs(monitorColorMax(:,2,3)-upvplWhitePoints(:,2)),'y');
hold on;
plot(abs(monitorColorMax(:,1,5)-upvplWhitePoints(:,1)),'g');
hold on;
plot(abs(monitorColorMax(:,2,7)-upvplWhitePoints(:,2)),'b');
hold off;
bMaxSaturation = max(abs(monitorColorMax(:,2,7)-upvplWhitePoints(:,2)))

figure;
plot(abs(monitorColorMax(:,1,2)-upvplWhitePoints(:,1)),'b');
hold on;
plot(abs(monitorColorMax(:,2,2)-upvplWhitePoints(:,2)),'y');
hold off;

fixedColorMax = zeros(size(monitorColorMax));
for i = 1:8
    for j = 1:2
        fixedColorMax(:,j,i) = monitorColorMax(:,j,i)-upvplWhitePoints(:,j);
    end
end
figure;
plot(fixedColorMax(:,1,1));
        
for i = 114:200
    fixedColorMax(i,1,1) = fixedColorMax(i,1,1)*abs(monitorColorMax(i,2,7)-upvplWhitePoints(i,2))/bMaxSaturation;
end
figure;
plot(fixedColorMax(:,1,1),'r');
    %114 115
